<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading View - PreÃ§o em Tempo Real</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style_modern.css') }}">
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="https://unpkg.com/lightweight-charts@3.8.0/dist/lightweight-charts.standalone.production.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸ“ˆ Trading View - PreÃ§o em Tempo Real</h1>
            <p class="subtitle">Visualize grÃ¡ficos e preÃ§os de ativos em tempo real</p>
        </header>

        <div class="controls">
            <div class="input-group autocomplete-wrapper">
                <label for="symbol-input">Ativo (Exchange:Symbol):</label>
                <input 
                    type="text" 
                    id="symbol-input" 
                    placeholder="Digite para buscar... Ex: BTC, ETH, AAPL" 
                    value="BINANCE:BTCUSDT"
                    autocomplete="off"
                >
                <div id="autocomplete-results" class="autocomplete-results"></div>
            </div>
            <div class="input-group">
                <label for="timeframe-select">Timeframe:</label>
                <select id="timeframe-select">
                    <option value="1m" selected>1 Minuto</option>
                    <option value="5m">5 Minutos</option>
                    <option value="15m">15 Minutos</option>
                    <option value="30m">30 Minutos</option>
                    <option value="1h">1 Hora</option>
                    <option value="2h">2 Horas</option>
                    <option value="4h">4 Horas</option>
                    <option value="1d">1 Dia</option>
                    <option value="1w">1 Semana</option>
                    <option value="1M">1 MÃªs</option>
                </select>
            </div>
            <button id="start-btn" class="btn btn-primary">Iniciar Stream</button>
            <button id="stop-btn" class="btn btn-secondary" disabled>Parar Stream</button>
        </div>

        <div class="price-display">
            <div class="price-card">
                <div class="price-label">PreÃ§o Atual</div>
                <div id="current-price" class="price-value">-</div>
                <div id="price-change" class="price-change">-</div>
            </div>
            <div class="info-grid">
                <div class="info-item">
                    <span class="info-label">Abertura:</span>
                    <span id="open-price" class="info-value">-</span>
                </div>
                <div class="info-item">
                    <span class="info-label">MÃ¡xima:</span>
                    <span id="high-price" class="info-value">-</span>
                </div>
                <div class="info-item">
                    <span class="info-label">MÃ­nima:</span>
                    <span id="low-price" class="info-value">-</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Volume:</span>
                    <span id="volume" class="info-value">-</span>
                </div>
            </div>
        </div>

        <div class="trading-section">
            <div class="chart-container">
                <div id="chart">
                    <!-- Chart Toolbar -->
                    <div id="chart-toolbar" class="chart-toolbar">
                        <div class="toolbar-section">
                            <label>Timeframe:</label>
                            <div class="toolbar-buttons">
                                <button class="tf-btn" data-tf="1m">1m</button>
                                <button class="tf-btn" data-tf="5m">5m</button>
                                <button class="tf-btn" data-tf="15m">15m</button>
                                <button class="tf-btn" data-tf="30m">30m</button>
                                <button class="tf-btn" data-tf="1h">1h</button>
                                <button class="tf-btn" data-tf="4h">4h</button>
                                <button class="tf-btn" data-tf="1d">1D</button>
                            </div>
                        </div>
                        <div class="toolbar-section">
                            <label>Indicadores:</label>
                            <div class="toolbar-buttons">
                                <button class="indicator-btn" data-indicator="ema" title="EMA 9/21">ðŸ“ˆ EMA</button>
                                <button class="indicator-btn" data-indicator="sma" title="SMA 20/50">ðŸ“Š SMA</button>
                                <button class="indicator-btn" data-indicator="bb" title="Bollinger Bands">ðŸŽ¯ BB</button>
                                <button class="indicator-btn" data-indicator="volume" title="Volume">ðŸ“Š VOL</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="chart-overlays"></div>
            </div>
            
            <div class="trading-panel">
                <div class="trading-header">
                    <h3>ðŸŽ¯ OpÃ§Ãµes BinÃ¡rias</h3>
                    <div class="balance">
                        <span class="balance-label">Saldo:</span>
                        <span id="balance" class="balance-value">$10,000.00</span>
                    </div>
                </div>
                
                <div class="trading-controls">
                    <div class="control-group">
                        <label>Valor do Investimento:</label>
                        <div class="amount-selector">
                            <button class="amount-btn" data-amount="10">$10</button>
                            <button class="amount-btn active" data-amount="50">$50</button>
                            <button class="amount-btn" data-amount="100">$100</button>
                            <button class="amount-btn" data-amount="500">$500</button>
                            <input type="number" id="custom-amount" placeholder="Valor customizado" min="1" value="50">
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <label>Tempo de ExpiraÃ§Ã£o:</label>
                        <div class="expiry-selector">
                            <button class="expiry-btn active" data-expiry="60">1 min</button>
                            <button class="expiry-btn" data-expiry="180">3 min</button>
                            <button class="expiry-btn" data-expiry="300">5 min</button>
                            <button class="expiry-btn" data-expiry="900">15 min</button>
                        </div>
                    </div>
                    
                    <div class="trade-buttons">
                        <button id="put-btn" class="trade-btn put-btn" disabled>
                            <span class="btn-icon">ðŸ“‰</span>
                            <span class="btn-text">PUT (VENDA)</span>
                            <span class="btn-payout">Retorno: 85%</span>
                        </button>
                        <button id="call-btn" class="trade-btn call-btn" disabled>
                            <span class="btn-icon">ðŸ“ˆ</span>
                            <span class="btn-text">CALL (COMPRA)</span>
                            <span class="btn-payout">Retorno: 85%</span>
                        </button>
                    </div>
                    
                    <div id="active-trades" class="active-trades"></div>
                </div>
                
                <div class="trading-history">
                    <h4>ðŸ“Š HistÃ³rico de OperaÃ§Ãµes</h4>
                    <div id="history-list" class="history-list">
                        <p class="no-history">Nenhuma operaÃ§Ã£o realizada ainda</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="status-bar">
            <div id="status" class="status">
                <span class="status-dot"></span>
                <span id="status-text">Desconectado</span>
            </div>
            <div id="symbol-display">-</div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
    <script src="{{ url_for('static', filename='test_chart.js') }}"></script>
</body>
</html>

